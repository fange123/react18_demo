{"ast":null,"code":"var _jsxFileName = \"/Users/zhangdabao/Desktop/desk/my-react-demo/react18_demo/reactProject/src/demo/useEffect-async-await/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EffectAsync = () => {\n  _s();\n\n  //! 如果 useEffect 第一个参数传入 async，返回值则变成了 Promise，会导致 react 在调用销毁函数的时候报错**。\n  // *  由于 useEffect 是在函数式组件中承担执行副作用操作的职责，\n  // *  它的返回值的执行操作应该是可以预期的，而不能是一个异步函数，所以不支持回调函数 async...await 的写法。\n  //*  我们可以将 async...await 的逻辑封装在 useEffect 回调函数的内部，\n  //*  这就是 ahooks useAsyncEffect 的实现思路，而且它的范围更加广，\n  //*  它支持的是所有的异步函数，包括 generator function。\n  useEffect(async () => {\n    const res = await new Promise(resolve => resolve('ok'));\n    console.log(res);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EffectAsync, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = EffectAsync;\nexport default EffectAsync;\n\nvar _c;\n\n$RefreshReg$(_c, \"EffectAsync\");","map":{"version":3,"names":["React","useEffect","EffectAsync","res","Promise","resolve","console","log"],"sources":["/Users/zhangdabao/Desktop/desk/my-react-demo/react18_demo/reactProject/src/demo/useEffect-async-await/index.jsx"],"sourcesContent":["import React,{ useEffect } from 'react';\n\nconst EffectAsync = () => {\n\n  //! 如果 useEffect 第一个参数传入 async，返回值则变成了 Promise，会导致 react 在调用销毁函数的时候报错**。\n// *  由于 useEffect 是在函数式组件中承担执行副作用操作的职责，\n// *  它的返回值的执行操作应该是可以预期的，而不能是一个异步函数，所以不支持回调函数 async...await 的写法。\n\n//*  我们可以将 async...await 的逻辑封装在 useEffect 回调函数的内部，\n//*  这就是 ahooks useAsyncEffect 的实现思路，而且它的范围更加广，\n//*  它支持的是所有的异步函数，包括 generator function。\n\n  useEffect(async() =>{\n    const res = await new Promise(resolve =>resolve('ok'))\n    console.log(res);\n  },[])\n  return (\n    <div>\n\n    </div>\n  );\n};\n\nexport default EffectAsync;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAAgC,OAAhC;;;AAEA,MAAMC,WAAW,GAAG,MAAM;EAAA;;EAExB;EACF;EACA;EAEA;EACA;EACA;EAEED,SAAS,CAAC,YAAU;IAClB,MAAME,GAAG,GAAG,MAAM,IAAIC,OAAJ,CAAYC,OAAO,IAAGA,OAAO,CAAC,IAAD,CAA7B,CAAlB;IACAC,OAAO,CAACC,GAAR,CAAYJ,GAAZ;EACD,CAHQ,EAGP,EAHO,CAAT;EAIA,oBACE;IAAA;IAAA;IAAA;EAAA,QADF;AAKD,CAnBD;;GAAMD,W;;KAAAA,W;AAqBN,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}